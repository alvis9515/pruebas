---
- name: Verificar
  hosts: all
  gather_facts: false

  vars:
#    website_url: "{{ pagina }}"
    max_attempts: 10
    delay_seconds: 10

  tasks:
    - name: Verificacion
      uri:
        url: "{{ pagina }}"
        method: GET
        return_content: yes
        status_code: 200
      register: response
      retries: "{{ max_attempts }}"
      delay: "{{ delay_seconds }}"
      failed_when: response.status in [200, 404, 503]
      changed_when: false      


    - name: Respuesta
      debug:
        msg: "El estado es: {{ response.status }}"
      when: response.status == 200



