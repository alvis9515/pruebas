---
- name: Crear rol y base de datos en PostgreSQL
  hosts: localhost
  become: yes
  tasks:
    - name: Instalar el m칩dulo psycopg2
      pip:
        name: psycopg2-binary
      become_user: postgres  # Cambia a usuario postgres para instalar el m칩dulo

    - name: Crear un rol en PostgreSQL
      postgresql_user:
        db: mydatabase  # Nombre de la base de datos
        name: myrole    # Nombre del rol
        password: mypassword  # Contrase침a del rol
        state: present

    - name: Crear una base de datos en PostgreSQL
      postgresql_db:
        name: mydatabase  # Nombre de la base de datos
        state: present

    - name: Crear un usuario en PostgreSQL y asignarlo al rol
      postgresql_user:
        db: mydatabase
        name: myuser    # Nombre de usuario
        password: myuserpassword  # Contrase침a del usuario
        priv: myrole
        state: present
